<html>



<head>

    <script src="f1web.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js"></script>
    <script type="text/javascript"
        src="//cdn.jsdelivr.net/gh/clappr/clappr-level-selector-plugin@latest/dist/level-selector.min.js"></script>
</head>

<body>

    <script>
        // var seas = getSeasonsJSON()[1];
        // console.log(seas);
        // var event = getEventJSON(seas.eventoccurrence_urls[0]);
        // console.log(event);
        // var sess = getSessionJSON(event.sessionoccurrence_urls[4]);
        // console.log(sess);
        // var streams = getSessionStreamsJSON(sess.slug);
        // console.log(streams);
        // var fixedStreams = addCorrectURLs(streams);
        // console.log(fixedStreams);
        // year // event // session // stream // f1
        //search("2019","esp","quali","vettel");
        //search("","","","");

        //search();





    </script>
    <div id="player"></div>
    <script>
        var width = window.innerWidth * .8;
        var height = window.innerHeight * .8;
        var player = new Clappr.Player({
            parentId: "#player",
            width: "100%",
            height: "100%",
            parentId: "#player",
            autoPlay: false,
            crossOrigin: "*.formula1.com",
            mimeType: 'application/x-mpegURL',
            hlsjsConfig: {
                xhrSetup: function (xhr, url) {
                    xhr.withCredentials = true; // do send cookies
                },
            },
            plugins: [LevelSelector]

        });
      



        
    </script>
    <script>
        function changeSource(sourceString) {
            console.log("Switching to : " + sourceString)
            console.log(player.core.getCurrentPlayback().name);
            player.configure({

                source: sourceString,
                autoPlay: true,
                //mimeType: 'application/x-mpegURL',
                hlsjsConfig: {
                    xhrSetup: function (xhr, url) {
                        xhr.withCredentials = true; // do send cookies
                    },
                }



            })

        }

    </script>
    <script>
        changeSource("https://f1tv-cdn-cent-live.formula1.com/ondemand/c14d/_C_/3/2/wif0607053018/1/clip_2_OTT_F1_WIF_VIDEO_6_5500000.m3u8");
        changeSource(search());
        player.play();
    </script>
</body>

</html>